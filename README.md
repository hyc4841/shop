# shop
JPA를 이용한 쇼핑몰 API 서버

jwt를 이용한 로그인 구현

restful api 설계

새로안 사실들
- ControllerAdvice로 필터에서 발생한 예외를 api로 처리하지 못한다. 필터가 컨트롤러 보다 먼저 실행되기 때문

- 리액트 : 훅 안에서 다른 훅을 사용 못한다?
- 리액트 : 본문에 useState를 그대로 사용하면 무한 재렌더링이 일어나 오류를 유발하기 때문에 함수 안으로 감싸서 사용하는것이 좋다
- 리액트 : 함수 기반 컴포넌트에 onClick 함수 넣을 때 onClick={함수명}이렇게 넣어야함. onClick={함수명()} 이렇게 넣으면 오류 난다.
- 리액트 : useEffect도 마찬가지로 안에 useState를 사용할 때, 의존성 배열을 제대로 설정 안해주면 무한 재렌더링에 빠질 수 있다.


- 컨트롤러에서 http 만지는 방법은? HttpServletRequest를 매개변수로 받으면 된다.
- 쿠키를 만료 시키거나 삭제하려면 HttpServletResponse에서 해야 한다.
- 스프링 시큐리티에서 기본적으로 /logout 경로를 사용하니까. SecurityFilterChain에서 로그아웃 사용안한다고 설정해주거나 해야함.




jwt 흐름
- 로그인 될 때 리프레시 토큰이 redis에 저장되며, 만약 이전에 리프레시가 저장되어 있으면 갱신된다.
- 엑세스 토큰이 만료되었을 때 바로 쿠키에 담겨 있는 리프레시 토큰을 읽어서 유효성을 검증한 후에 엑세스 토큰을 다시 발급해주는 식으로


이제는 슬슬 jpa 이용해서 데이터베이스 구축하고 해야함.
